<div class="cart-page container py-5">
  <h1 class="text-center mb-4">Votre Panier</h1>

  {% if cart.item_count > 0 %}
    <form action="{{ routes.cart_url }}" method="post" novalidate class="cart-form">
      <div class="cart-items">
        {% for item in cart.items %}
          <div class="cart-item">
            <div class="cart-item-image">
              {% if item.image %}
                <img src="{{ item.image | image_url: width: 150 }}" alt="{{ item.title }}">
              {% endif %}
            </div>
            <div class="cart-item-details">
              <h3>{{ item.product.title }}</h3>
              <p>{{ item.variant.title }}</p>
              <p>Prix: {{ item.final_price | money }}</p>
              <div class="cart-item-quantity">
                <input type="number" name="updates[{{ item.key }}]" value="{{ item.quantity }}" min="0" id="updates_{{ item.key }}">
              </div>
              <a href="{{ item.url_to_remove }}" class="cart-remove-link">Retirer</a>
            </div>
            <div class="cart-item-total">
              {{ item.final_line_price | money }}
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="cart-footer mt-4">
        <div class="cart-notes">
          <label for="CartSpecialInstructions">Instructions spéciales pour la commande</label>
          <textarea name="note" id="CartSpecialInstructions" class="cart-note-input">{{ cart.note }}</textarea>
        </div>

        <div class="gift-wrap-option mt-4">
          <input type="checkbox" name="attributes[gift_wrap]" id="gift-wrap" value="yes" {% if cart.attributes.gift_wrap == 'yes' %}checked{% endif %}>
          <label for="gift-wrap">Emballage cadeau (Gratuit)</label>
        </div>

        <div class="cart-totals text-center mt-4">
          <h3>Total: {{ cart.total_price | money }}</h3>
          <small>Taxes et frais de port calculés à l'étape suivante.</small>
          <div class="cart-actions mt-4">
             <button type="submit" name="update" class="btn btn-secondary">Mettre à jour</button>
             <button type="submit" name="checkout" class="btn">Procéder au paiement</button>
          </div>
        </div>
      </div>
    </form>
  {% else %}
    <div class="text-center empty-cart">
      <p>Votre panier est vide.</p>
      <a href="{{ routes.all_products_collection_url }}" class="btn">Continuer vos achats</a>
    </div>
  {% endif %}
</div>

<style>
  .cart-item {
    display: flex;
    gap: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
    padding: var(--spacing-md) 0;
  }
  .cart-item-image img {
    border-radius: var(--radius-sm);
  }
  .cart-note-input {
    width: 100%;
    min-height: 100px;
    padding: var(--spacing-sm);
    margin-top: var(--spacing-xs);
  }
</style>

{% schema %}
{
  "name": "Cart",
  "settings": []
}
{% endschema %}

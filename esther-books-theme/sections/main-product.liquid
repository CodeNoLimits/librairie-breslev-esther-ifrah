<div class="product-page container py-5">
  <div class="product-layout">
    <div class="product-media">
      {% if product.featured_image %}
        <img src="{{ product.featured_image | image_url: width: 600 }}" alt="{{ product.title }}" class="product-main-image">
      {% else %}
        {{ 'product-1' | placeholder_svg_tag }}
      {% endif %}
    </div>

    <div class="product-info">
      <h1 class="product-title">{{ product.title }}</h1>

      <div class="product-meta mb-4">
        {% if product.metafields.custom.author %}
          <p><strong>Auteur:</strong> {{ product.metafields.custom.author }}</p>
        {% endif %}
        {% if product.metafields.custom.translator %}
          <p><strong>Traducteur:</strong> {{ product.metafields.custom.translator }}</p>
        {% endif %}
        {% if product.metafields.custom.pages_count %}
          <p><strong>Pages:</strong> {{ product.metafields.custom.pages_count }}</p>
        {% endif %}
        {% if product.metafields.custom.original_language %}
          <p><strong>Langue originale:</strong> {{ product.metafields.custom.original_language }}</p>
        {% endif %}
      </div>

      <div class="product-price mb-4">
        <span class="price">{{ product.price | money }}</span>
        {% if product.compare_at_price > product.price %}
          <s class="compare-price">{{ product.compare_at_price | money }}</s>
        {% endif %}
      </div>

      <div class="product-description mb-4">
        {{ product.description }}
      </div>

      {% form 'product', product %}
        <div class="product-variants mb-4">
           {% unless product.has_only_default_variant %}
             <div class="option-group">
               <label>Sélectionnez une option :</label>
               <select name="id" class="variant-selector">
                 {% for variant in product.variants %}
                   <option value="{{ variant.id }}"
                     {% if variant == product.selected_or_first_available_variant %}selected="selected"{% endif %}
                     {% unless variant.available %}disabled="disabled"{% endunless %}
                   >
                     {{ variant.title }} - {{ variant.price | money_with_currency }}
                   </option>
                 {% endfor %}
               </select>
             </div>
           {% else %}
             <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
           {% endunless %}
        </div>

        <div class="product-actions">
          <button type="submit" class="btn btn-primary add-to-cart">
            {% if product.available %}
              Ajouter au panier
            {% else %}
              Épuisé
            {% endif %}
          </button>
        </div>
      {% endform %}

      {% if product.metafields.custom.extract_pdf %}
        <div class="mt-4">
           <a href="{{ product.metafields.custom.extract_pdf.value.url }}" target="_blank" class="btn btn-secondary">
             Lire un extrait
           </a>
        </div>
      {% endif %}
    </div>
  </div>
</div>

<style>
  .product-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-xl);
  }
  @media (max-width: 768px) {
    .product-layout {
      grid-template-columns: 1fr;
    }
  }
  .product-main-image {
    width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  }
  .product-title {
    font-size: 2rem;
    color: var(--color-primary);
  }
  .price {
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--color-ink);
  }
</style>

{% schema %}
{
  "name": "Main Product",
  "settings": [],
  "presets": [
     { "name": "Main Product" }
  ]
}
{% endschema %}
